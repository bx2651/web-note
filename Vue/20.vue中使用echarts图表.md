## vue中使用echarts图表

1.引入echart文件

2.注册echart组件

3.定义初始化echart表格的方法，并将图表在data中初始化一下

4.在获取到数据之后，调用初始化图表的方法，将图表渲染到页面上



 需求：整个页面左边是展示该位置当月的相关信息，右边是展示该位置全年的水温、PH等的数据的折线图，每一个数据对应一张折线图，点击相关按钮，则会生成相应的数据的折线图 -->
思路：左侧展示的信息是固定死的，信息的值从后端返回的数据里动态获取；右侧的折线图的每一项数据保存成一个数组，并对应一个按钮，数组里是全年的这项数据的值.定义一个choice的data，用来保存每次点击的按钮对应的值，比如，点击水温，则将水温数组里值给choice。将choice传递给echart图表，传递之后将图表重新渲染。

```
<template>
  <div class="app-container">
    <!--基本信息-->
    <div class="info">
      <span class="title">
        <button class="info-icon"></button> 基本信息
      </span>
      <div class="left">
        <span>时间</span>
        <span>所属地市</span>
        <span>所属流域</span>
        <span>点位类型</span>
        <span>水质类别</span>
        <span>水系</span>
        <span>水温</span>
        <span>PH</span>
        <span>电导率</span>
        <span>溶解氧</span>
        <span>高锰酸钾指数</span>
        <span>氨氮</span>
        <span>总磷</span>
        <span>总氮</span>
      </div>
      <div class="right">
        <span>{{CYSJ[0]}}</span>
        <span>{{SSDS[0]}}</span>
        <span>{{SSLY[0]}}</span>
        <span>{{DWLX[0]}}</span>
        <span>{{SZLB[0]}}</span>
        <span>{{SX[0]}}</span>
        <span>{{SW[SW.length-1]}}</span>
        <span>{{PH[PH.length-1]}}</span>
        <span>{{DDL[DDL.length-1]}}</span>
        <span>{{RJY[RJY.length-1]}}</span>
        <span>{{GMSJZS[GMSJZS.length-1]}}</span>
        <span>{{AD[AD.length-1]}}</span>
        <span>{{ZL[ZL.length-1]}}</span>
        <span>{{ZD[ZD.length-1]}}</span>
      </div>
    </div>
    <!-- 图表 -->
    <div class="echarts">
      <div>
        <span class="title">
          <button class="info-icon"></button> 监测因子浓度变化
        </span>
        <!-- 选择图表类型 -->
        <!-- 此处不够优雅，以后有时间再改 -->
        <div style="background-color:white" class="select-button">
          <el-button
            class="filter-item"
            size="mini"
            type="primary"
            plain
            autofocus="true"
            @click="selectChartType(1)"
          >水温</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(2)"
          >PH</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(3)"
          >电导率</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(4)"
          >溶解氧</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(5)"
          >高锰酸钾指数</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(6)"
          >氨氮</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(7)"
          >总磷</el-button>

          <el-button
            v-permission="['ADMIN','ATTADVISEBAK_ALL','ATTADVISEBAK_CREATE']"
            class="filter-item"
            size="mini"
            type="primary"
            plain
            @click="selectChartType(8)"
          >总氮</el-button>
        </div>

        <!-- 展示对应图表 -->
        <div class="echarts-type">
          <div class="echart-item">
            <IEcharts ref="echart" :option="Line" :loading="loading" />
          </div>
        </div>
      </div>
    </div>
    <!--表单组件-->
  </div>
</template>

<script>
import IEcharts from "vue-echarts-v3/src/full.js";
import checkPermission from "@/utils/permission";
import initData from "@/mixins/initData"; //使用get方法
import echarts from "echarts";

export default {
  components: { eForm, IEcharts },
  mixins: [initData],
  data() {
    return {
      urls: "api/statis/ev/getAdComplain",//此处应修改url
      paramss: "",
      Line: {},
      delLoading: false,
      pieInfo: [],
      SSDS: ["北京"],
      SSLY: ["黄河"],
      DWLX: ["undefined"],
      SZLB: ["淡水"],
      SX: ["黄河"],
      CYSJ: [2019 - 11 - 1],
      SW: [],
      PH: [],
      DDL: [],
      RJY: [],
      GMSJZS: [],
      AD: [],
      ZL: [],
      ZD: [],
      title: "水温最近一年变化趋势",
      choice: []
    };
  },
  mounted() {
    this.getData();
  },
  methods: {
    checkPermission,
    beforeInit() {
      this.url = this.urls;
      return true;
    },
    getData() {
      this.init().then(res => {

        //拿到数据后将数据以数组的方式保存,看后端返回数据的形式，可能需要遍历拿值
        this.SW = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
        this.choice = this.SW;
        this.PH = [5, 5, 5, 5, 5, 2, 2, 2, 2, 2, 4];
        this.DDL = [9, 8, 7, 6, 5, 2, 1, 1, 1];
        this.RJY = [5, 5, 5, 5, 5, 2, 6, 8, 4, 1, 4];
        this.GMSJZS = [6, 5, 4, 3, 2, 1, 1, 1];
        this.AD = [5, 5, 5, 5, 5, 2, 2, 2, 2, 2, 4];
        this.ZL = [9, 8, 7, 6, 5, 4, 3, 2, 1, 1, 1];
        this.ZD = [5, 5, 5, 5, 5, 2, 2, 2, 2, 2, 4];

        this.initEcharts();//获取到数据后初始化一下图表
      });
      return true;
    },
    initEcharts() {
      this.Line = {
        title: {
          left: "center",
          text: this.title,
          textStyle: {
            fontSize: 15
          }
        },
        tooltip: {
          trigger: "axis"
        },
        xAxis: {
          data: [
            "1月",
            "2月",
            "3月",
            "4月",
            "5月",
            "6月",
            "7月",
            "8月",
            "9月",
            "10月",
            "11月",
            "12月"
          ]
        },
        yAxis: {
          type: "value"
        },
        series: [
          {
            type: "line",
            data: this.choice
          }
        ]
      };
    },
    selectChartType(num) {
      switch (num) {
        case 1:
          this.choice = this.SW;
          this.title = "水温最近一年变化趋势";
          this.initEcharts();
          break;
        case 2:
          this.choice = this.PH;
          this.title = "PH最近一年变化趋势";
          this.initEcharts();
          break;
        case 3:
          this.choice = this.DDL;
          this.title = "电导率最近一年变化趋势";
          this.initEcharts();
          break;
        case 4:
          this.choice = this.RJY;
          this.title = "溶解氧最近一年变化趋势";
          this.initEcharts();
          break;
        case 5:
          this.choice = this.GMSJZS;
          this.title = "高锰酸钾指数最近一年变化趋势";
          this.initEcharts();
          break;
        case 6:
          this.choice = this.AD;
          this.title = "氨氮最近一年变化趋势";
          this.initEcharts();
          break;
        case 7:
          this.choice = this.ZL;
          this.title = "总磷最近一年变化趋势";
          this.initEcharts();
          break;
        case 8:
          this.choice = this.ZD;
          this.title = "总氮最近一年变化趋势";
          this.initEcharts();
          break;
      }
    }
  }
};
</script>

<style scoped>
.echarts {
  /* display: inline-block; */
  height: 400px;
  width: 600px;
  background-color: white;
  margin-bottom: 20px;
  position: relative;
  float: left;
}
.select-button {
  text-align: right;
  line-height: 50px;
  margin: 0 auto;
  margin-right: 10px;
}
.filter-item {
  margin-left: -1px;
}
.echart-item {
  width: 100%;
  height: 300px;
  top: 50px;
}
.info {
  /* display: inline-block; */
  background-color: #fff;
  width: 190px;
  height: 400px;
  border-right: aqua dashed 1px;
  font-size: 13px;
  float: left;
  line-height: 25px;
}
.info-icon {
  width: 10px;
  height: 15px;
  border-radius: 50%;
  background-color: aqua;
  margin-left: 10px;
}
.title {
  line-height: 36px;
  font-size: 14px;
  color: dodgerblue;
}
.left {
  display: inline-block;
  width: 60%;
  margin-left: 20px;
}
.right {
  display: inline-block;
  width: 25%;
}
span {
  display: block;
}
</style>


```

